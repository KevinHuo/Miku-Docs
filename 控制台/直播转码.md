# 直播转码

直播转码模板需要绑定到 **直播空间** 或 **直播流** 才能生效。每个账号最多可设置 **50 个转码模板**。使用转码模板会产生额外费用，具体价格请参考 [转码计费规则](https://www.qiniu.com/prices/mikustream)。

---

# 创建转码模板

1. 打开 [直播转码模板管理](https://portal.qiniu.com/mikustream/templates)。
2. 点击 **新建模板**。
3. 配置转码参数，包括分辨率、码率、帧率等。

![转码设置](https://docs.qnsdk.com/miku_a7c4e9f132bd4a0c9f85d672b13e4f8c.png)
![转码设置](https://docs.qnsdk.com/miku_f29c7e1bd4a4410e8c36a95f7b12e8cf.png)

## 配置项详细说明

| 配置项        | 配置参数                    | 详细说明                                                                                                                         |
| ---------- | ----------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| **模板名称**   | 英文或数字                   | 自定义模板名称，方便管理。支持字母、数字、中划线、下划线，长度 4-64 个字符，例如 `hd_720p` 或 `live_1080p`                                                         |
| **模板描述**   | 任意文字                    | 对模板用途的说明，例如“高清直播用”，不超过 200 个字符                                                                                               |
| **音视频输出**  | 音视频同时输出 / 只输出视频 / 只输出音频 | 决定转码后输出内容：<br>- 音视频同时输出 → 保留画面和声音<br>- 只输出视频 → 无声音<br>- 只输出音频 → 无画面，适合音乐或播客直播                                                |
| **视频编码**   | H264 / H265             | 视频压缩格式：<br>- H264 → 兼容性好，设备支持广<br>- H265 → 压缩率高，文件小，但部分设备不支持                                                                |
| **分辨率**    | 固定分辨率 / 长边或短边设置         | 输出视频的清晰度：<br>- 固定分辨率，例如 1280x720<br>- 长边/短边设置 → 根据画面长宽，自行确认宽高分辨率                                                                  |
| **视频码率**   | kbps                    | 影响画面清晰度和网络流量：<br>- 高码率 → 画面清晰，但占用带宽大<br>- 低码率 → 节省带宽，但可能模糊<br>参考：480p 800–1200 kbps，720p 1500–2500 kbps，1080p 3000–5000 kbps |
| **视频帧率**   | fps                     | 视频每秒播放帧数：<br>- 30fps → 普通直播够用<br>- 60fps → 动作更流畅，适合游戏或体育直播                                                                   |
| **关键帧间隔**  | 秒                       | I 帧出现间隔                                                             |
| **去 B 帧**  | 布尔值                     | B 帧用于压缩，去掉可减少延迟，如果有 RTC 观众且推流端无法控制 B 帧，建议开启                                                                            |
| **保留 SEI** | 布尔值                     | SEI 是视频中的附加信息，可用于字幕或时间戳，需要可关闭                                                                                         |
| **音频编码**   | AAC                     | 音频压缩格式，固定为 AAC，兼容性和音质好                                                                                                       |
| **声道数**    | 原声道 / 单声道 / 双声道 / 更多    | 音频通道设置：<br>- 单声道 → 文件小，适合语音<br>- 双声道 → 常用，适合直播音乐<br>- 原声道 → 保持原视频声道                                                          |

**小贴士**：

* 不确定码率或帧率，可参考常用直播标准，避免画面模糊或卡顿。
* 推流端去 B 帧操作可参考 [OBS 推不含 B 帧指南](https://developer.qiniu.com/mikustream/12977/obs-streaming-excluding-b-frame-guidelines)。

---

# 绑定转码模板

1. 打开 [直播空间列表](https://portal.qiniu.com/mikustream/buckets)。
2. 点击目标直播空间，绑定所需转码模板。

![转码模板绑定](https://docs.qnsdk.com/miku_b13fa9c7e2d44f0a9c58d73fe904c2ab.png)

## 注意事项

* 模板绑定后不会影响正在推流的直播流，需要 **重新推流** 才能生效。
* **被动转码**：有对应播放请求时触发。
* **主动转码**：推流时立即触发。

---

# 获取转码播放地址

1. 打开 [地址生成器](https://portal.qiniu.com/mikustream/tools/address-generator)。
2. 填写相关信息，即可生成转码播放地址，用于播放或分享。

![地址生成器](https://docs.qnsdk.com/miku_ef29c7d1b43a4f0e9d8a62f7c104b3de.png)

**建议**：
在绑定模板前，先规划好转码方案和输出分辨率，避免重复操作导致额外费用。
